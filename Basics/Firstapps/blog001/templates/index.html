{% extends "base.html" %}
{% block title %}Feed · Noir8 Blog{% endblock %}
{% block content %}
<div class="row g-4">
  <aside class="col-lg-3">
    <div class="glass p-3">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <h5 class="m-0">Topics</h5>
        {% if active_topic %}
          <a class="btn btn-sm btn-noir" href="{{ url_for('index') }}">Clear</a>
        {% endif %}
      </div>
      <div class="d-flex flex-wrap gap-2">
        {% for t in topics %}
          <a class="tag {% if active_topic==t.slug %}border-info{% endif %}"
             href="{{ url_for('by_topic', slug=t.slug) }}">{{ t.name }}</a>
        {% endfor %}
      </div>
    </div>
  </aside>

  <section class="col-lg-9">
    {% if posts.items|length == 0 %}
      <div class="glass p-4 text-center">No posts yet.</div>
    {% else %}
      <div class="row g-4">
        {% for post in posts.items %}
          <div class="col-md-6">
            {% include "_post_card.html" %}
          </div>
        {% endfor %}
      </div>

      <nav class="mt-4 d-flex justify-content-between">
        <a class="btn btn-noir {% if not posts.has_prev %}disabled{% endif %}" href="{{ url_for('index', page=posts.prev_num, topic=active_topic, q=q) }}">« Prev</a>
        <span class="align-self-center small link-muted">Page {{ posts.page }} / {{ posts.pages or 1 }}</span>
        <a class="btn btn-noir {% if not posts.has_next %}disabled{% endif %}" href="{{ url_for('index', page=posts.next_num, topic=active_topic, q=q) }}">Next »</a>
      </nav>
    {% endif %}
  </section>
</div>
{% endblock %}