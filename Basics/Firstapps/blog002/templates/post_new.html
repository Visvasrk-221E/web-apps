{% extends "base.html" %}
{% block title %}{% if post %}Edit Post{% else %}New Post{% endif %}{% endblock %}
{% block content %}
<div class="card glass p-4 mt-4">
  <h3 class="mb-3">{% if post %}Edit Post{% else %}Create New Post{% endif %}</h3>
  <form method="post" enctype="multipart/form-data">
    <div class="mb-3">
      <label class="form-label">Title</label>
      <input name="title" value="{{ post.title if post else '' }}" class="form-control bg-black text-light">
    </div>
    <div class="mb-3">
      <label class="form-label">Topic</label>
      <select name="topic_id" class="form-select bg-black text-light">
        {% for t in topics %}
          <option value="{{ t.id }}" {% if post and post.topic_id==t.id %}selected{% endif %}>{{ t.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Body (Markdown)</label>
      <textarea name="body" class="form-control bg-black text-light" rows="10">{{ post.body if post else '' }}</textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Attachment (optional)</label>
      <input type="file" name="attachment" class="form-control form-control-sm bg-black text-light">
      {% if post and post.attachment_filename %}
        <div class="small text-muted mt-1">Existing: {{ post.attachment_filename }}</div>
      {% endif %}
    </div>
    <button class="btn btn-outline-light mt-2">Save</button>
  </form>
</div>
{% endblock %}
